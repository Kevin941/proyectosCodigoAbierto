<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>The Ontopia Schema Language</title>
<link type="text/css" href="whitepapers.css" rel="stylesheet">
</head>
<body>
<h1>The Ontopia Schema Language</h1>
<h2 class="subtitle">Reference Specification</h2>
<table width="100%">
<tr>
<td>
<table>
<tr>
<th>Published by:</th><td>Ontopia</td>
</tr>
<tr>
<th>Date:</th><td>2013-08-01</td>
</tr>
<tr>
<th>Version:</th><td>5.3.0</td>
</tr>
</table>
</td><td><a href="http://www.ontopia.net"><img id="logo" border="0" align="right" alt="" src="logo.gif"></a></td>
</tr>
</table>
<h2>Abstract</h2>

<p>
This document is the specification of the Ontopia Schema Language,
providing an exhaustive reference documenting all features of the
language. For an introduction to the schema language, see the schema
tutorial.
</p>

<h2>Table of contents</h2>
<ul>
<li>
<a href="#N10021">1. Introduction</a>
</li>
<ul></ul>
<li>
<a href="#N10045">2. High-level elements</a>
</li>
<ul>
<li>
<a href="#N1004D">2.1. The tm-schema element</a>
</li>
<ul></ul>
<li>
<a href="#N100CA">2.2. The ruleset element</a>
</li>
<ul></ul>
<li>
<a href="#N10144">2.3. The topic element</a>
</li>
<ul></ul>
<li>
<a href="#N101EF">2.4. The baseName element</a>
</li>
<ul></ul>
<li>
<a href="#N10279">2.5. The variant element</a>
</li>
<ul></ul>
<li>
<a href="#N102FD">2.6. The occurrence element</a>
</li>
<ul></ul>
<li>
<a href="#N103A6">2.7. The playing element</a>
</li>
<ul></ul>
<li>
<a href="#N10436">2.8. The association element</a>
</li>
<ul></ul>
<li>
<a href="#N10484">2.9. The role element</a>
</li>
<ul></ul>
</ul>
<li>
<a href="#N1051B">3. Low-level elements</a>
</li>
<ul>
<li>
<a href="#N10523">3.1. The ruleref element</a>
</li>
<ul></ul>
<li>
<a href="#N1059D">3.2. The superclass element</a>
</li>
<ul></ul>
<li>
<a href="#N105FC">3.3. The player element</a>
</li>
<ul></ul>
<li>
<a href="#N1065E">3.4. The instanceOf element</a>
</li>
<ul></ul>
<li>
<a href="#N106D8">3.5. The scope element</a>
</li>
<ul></ul>
<li>
<a href="#N10761">3.6. The topicRef element</a>
</li>
<ul></ul>
<li>
<a href="#N107C3">3.7. The subjectIndicatorRef element</a>
</li>
<ul></ul>
<li>
<a href="#N10825">3.8. The internalTopicRef element</a>
</li>
<ul></ul>
<li>
<a href="#N10887">3.9. The any element</a>
</li>
<ul></ul>
<li>
<a href="#N108BD">3.10. The player element</a>
</li>
<ul></ul>
</ul>
</ul>






<h2>
<a name="N10021">1. Introduction</a>
</h2>



<p>
The Ontopia Schema Language uses an XML syntax defined in a DTD to
specify schemas. Schemas written in the language consist of
definitions of classes of topics and associations, defining the
allowed characteristics of each. Validating a topic map against a
schema is done by finding the class definition for each topic and
association, and verifying that the instance matches the class
definition. 
</p>


<p>
The Ontopia Schema Language has been designed to have a minimal number
of features and a minimum of expressive power. We expect to extend its
feature set according to user demand, and eventually to replace it
with the Topic Map Constraint Language (TMCL) currently being
developed within ISO. We have decided not to implement the TMCL before
it is finished in order to have a stable schema language as the basis
for our product suite.
</p>


<p>
The Ontopia Schema Language is intended to support many functions
within topic map projects, the most important of which are:
</p>


<ul>
<li>

<p>validation of the structure of topic map instances,</p>

</li>
<li>

<p>documentation of the structure of topic maps, and</p>

</li>
<li>

<p>guidance of topic map editing applications, in order to make
topic map editing easier and more convenient.</p>

</li>
</ul>



<h2>
<a name="N10045">2. High-level elements</a>
</h2>



<p>
This section defines the semantics of the high-level elements of the
Ontopia Schema Language, element by element.
</p>


<h3>
<a name="N1004D">2.1. The tm-schema element</a>
</h3>






<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow"></tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Summary:</td><td class="dbTableEntry">The container element for the schema.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Content model:</td><td class="dbTableEntry">(ruleset | topic | association)* </td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Parents:</td><td class="dbTableEntry">None</td>
</tr>
</table>




<p>
The <tt class="symbol">tm-schema</tt> element must be the document element of
all topic map schemas. It has no special semantics, but merely acts as
a container for the topic map schema.
</p>


<p>
The <tt class="symbol">tm-schema</tt> element has a single attribute:
<tt class="symbol">match</tt>, which can have the values
<tt class="symbol">loose</tt> and <tt class="symbol">strict</tt>. When doing loose
matching, topics and associations which match none of the specified
classes are accepted without complaint. When doing strict matching,
such topics and associations are rejected. The default is loose
matching.
</p>


<p>
The allowed children of <tt class="symbol">tm-schema</tt> elements are
<tt class="symbol">ruleset</tt>, <tt class="symbol">topic</tt>, and
<tt class="symbol">association</tt> elements, in any order.
</p>





<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow">
<th class="dbTableHeaderEntry">Name</th><th class="dbTableHeaderEntry">Type</th><th class="dbTableHeaderEntry">Required</th><th class="dbTableHeaderEntry">Default</th><th class="dbTableHeaderEntry">Definition</th>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">match</td><td class="dbTableEntry">loose, strict</td><td class="dbTableEntry">#DEFAULT</td><td class="dbTableEntry">loose</td><td class="dbTableEntry">Controls whether the schema uses loose or strict
      matching.</td>
</tr>
</table>






<h3>
<a name="N100CA">2.2. The ruleset element</a>
</h3>






<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow"></tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Summary:</td><td class="dbTableEntry">Contains a set of reusable named
    constraints.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Content model:</td><td class="dbTableEntry">(ruleref* , (baseName | occurrence | playing)* ) </td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Parents:</td><td class="dbTableEntry">tm-schema</td>
</tr>
</table>




<p>
The <tt class="symbol">ruleset</tt> element is used to specify a set of
constraints which can be reused by any topic class definition. Its
intent is to allow the specification of reused rules in a single
place, improving maintainability and readability of topic map
schemas.
</p>


<p>
The <tt class="symbol">ruleset</tt> element must have one, and only one
attribute, named <tt class="symbol">id</tt>, and containing a unique
identifier for the rule set, allowing it to be referenced from topic
classes.
</p>


<p>
The <tt class="symbol">ruleset</tt> element may contain any number of
<tt class="symbol">ruleref</tt> elements, followed by any number of
<tt class="symbol">baseName</tt>, <tt class="symbol">occurrence</tt>, and
<tt class="symbol">playing</tt> elements.
</p>





<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow">
<th class="dbTableHeaderEntry">Name</th><th class="dbTableHeaderEntry">Type</th><th class="dbTableHeaderEntry">Required</th><th class="dbTableHeaderEntry">Default</th><th class="dbTableHeaderEntry">Definition</th>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">id</td><td class="dbTableEntry">ID</td><td class="dbTableEntry">#REQUIRED</td><td class="dbTableEntry">&nbsp;</td><td class="dbTableEntry">The ID of the ruleset, by which it may be
      referred to.</td>
</tr>
</table>






<h3>
<a name="N10144">2.3. The topic element</a>
</h3>






<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow"></tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Summary:</td><td class="dbTableEntry">Defines a topic class.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Content model:</td><td class="dbTableEntry">(instanceOf , otherClass* , (ruleref | superclass)* , (baseName | occurrence | playing)* ) </td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Parents:</td><td class="dbTableEntry">tm-schema</td>
</tr>
</table>




<p>
The <tt class="symbol">topic</tt> element defines the constraints applying to
topics belonging to a particular class. The element may contain
constraints on the characteristics on instances of the class, as well
as other kinds of restrictions.
</p>


<p>
Each <tt class="symbol">topic</tt> element must have an
<tt class="symbol">instanceOf</tt> child, specifying what class of topic is
constrained by this rule. Only topics which match this
<tt class="symbol">instanceOf</tt> element must follow the constraints
specified by this <tt class="symbol">topic</tt> element.
</p>


<p>

<tt class="symbol">topic</tt> elements may have a <tt class="symbol">match</tt>
attribute, which may be set to <tt class="symbol">loose</tt> or
<tt class="symbol">strict</tt>. If set to <tt class="symbol">loose</tt> topic names,
occurrences, and roles not matching any of the constraints in the
topic class definition are accepted. If set to <tt class="symbol">strict</tt>
such characteristics will be rejected. The default is
<tt class="symbol">strict</tt> matching.
</p>


<p>
The <tt class="symbol">otherClass</tt> elements can be used to specify what
other classes instances of this topic class may be instances of. If
the element is not present instances of this class may not be
instances of any other class. If present, instances of this class may
only be instances of the classes specified by the element, and not any
other classes. <span class="remark">[<b>Remark: </b>Need a separate section, I guess.]</span>

</p>


<p>
The <tt class="symbol">baseName</tt>, <tt class="symbol">occurrence</tt>, and
<tt class="symbol">playing</tt> elements specify what characteristics
instances of this class may have.
</p>





<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow">
<th class="dbTableHeaderEntry">Name</th><th class="dbTableHeaderEntry">Type</th><th class="dbTableHeaderEntry">Required</th><th class="dbTableHeaderEntry">Default</th><th class="dbTableHeaderEntry">Definition</th>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">id</td><td class="dbTableEntry">ID</td><td class="dbTableEntry">#IMPLIED</td><td class="dbTableEntry">&nbsp;</td><td class="dbTableEntry">The ID of the class by which it may be referred
      to.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">match</td><td class="dbTableEntry">loose, strict</td><td class="dbTableEntry">#DEFAULT</td><td class="dbTableEntry">strict</td><td class="dbTableEntry">Whether matching of constraints is loose or
      strict.</td>
</tr>
</table>






<h3>
<a name="N101EF">2.4. The baseName element</a>
</h3>






<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow"></tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Summary:</td><td class="dbTableEntry">A constraint on the topic names of a
    topic.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Content model:</td><td class="dbTableEntry">(scope , variant*) </td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Parents:</td><td class="dbTableEntry">topic, ruleset</td>
</tr>
</table>




<p>

<tt class="symbol">baseName</tt> elements constrain the topic names a topic
may have. If a topic name has scope matching that specified in the
<tt class="symbol">scope</tt> child element of a <tt class="symbol">baseName</tt>
element it is validated against that <tt class="symbol">baseName</tt> rule.
</p>


<p>

<tt class="symbol">baseName</tt> elements may have <tt class="symbol">min</tt> and
<tt class="symbol">max</tt> attributes specifying the minimum and maximum
number of matching topic names each topic may have. The default is that
any number of matches is allowed.
</p>


<p>
The <tt class="symbol">variant</tt> child element is used to specify what
variants a topic name may have. Matching of variant names is always
strict, so variant names that do not match a rule in the schema are
rejected. 
</p>





<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow">
<th class="dbTableHeaderEntry">Name</th><th class="dbTableHeaderEntry">Type</th><th class="dbTableHeaderEntry">Required</th><th class="dbTableHeaderEntry">Default</th><th class="dbTableHeaderEntry">Definition</th>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">max</td><td class="dbTableEntry">CDATA</td><td class="dbTableEntry">#DEFAULT</td><td class="dbTableEntry">Inf</td><td class="dbTableEntry">The maximum number of matches allowed on this
      constraint for each instance of the class.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">min</td><td class="dbTableEntry">CDATA</td><td class="dbTableEntry">#DEFAULT</td><td class="dbTableEntry">0</td><td class="dbTableEntry">The minimum number of matches allowed on this
      constraint for each instance of the class.</td>
</tr>
</table>






<h3>
<a name="N10279">2.5. The variant element</a>
</h3>






<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow"></tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Summary:</td><td class="dbTableEntry">A constraint on the variant names of a base
    name.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Content model:</td><td class="dbTableEntry">(scope) </td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Parents:</td><td class="dbTableEntry">baseName</td>
</tr>
</table>




<p>
The <tt class="symbol">variant</tt> element is used to constrain the
allowed variants of topic names.  If a variant name has scope matching
that specified in the <tt class="symbol">scope</tt> child element of a
<tt class="symbol">variant</tt> element it is validated against that
<tt class="symbol">variant</tt> rule.
</p>


<p>

<tt class="symbol">variant</tt> elements may have <tt class="symbol">min</tt>
and <tt class="symbol">max</tt> attributes specifying the minimum and maximum
number of matching variant names each topic name may have. The default
is that any number of matches is allowed.
</p>





<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow">
<th class="dbTableHeaderEntry">Name</th><th class="dbTableHeaderEntry">Type</th><th class="dbTableHeaderEntry">Required</th><th class="dbTableHeaderEntry">Default</th><th class="dbTableHeaderEntry">Definition</th>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">max</td><td class="dbTableEntry">CDATA</td><td class="dbTableEntry">#DEFAULT</td><td class="dbTableEntry">Inf</td><td class="dbTableEntry">The maximum number of matches allowed on this
      constraint for each instance of the class.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">min</td><td class="dbTableEntry">CDATA</td><td class="dbTableEntry">#DEFAULT</td><td class="dbTableEntry">0</td><td class="dbTableEntry">The minimum number of matches allowed on this
      constraint for each instance of the class.</td>
</tr>
</table>






<h3>
<a name="N102FD">2.6. The occurrence element</a>
</h3>






<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow"></tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Summary:</td><td class="dbTableEntry">A constraint on the occurrences of a
    topic.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Content model:</td><td class="dbTableEntry">(instanceOf , scope?) </td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Parents:</td><td class="dbTableEntry">topic, ruleset</td>
</tr>
</table>




<p>
The <tt class="symbol">occurrence</tt> element is used to constrain the
possible occurrences a topic may have. If an occurrence has a type
matching that specified by the <tt class="symbol">instanceOf</tt> child it is
validated against that <tt class="symbol">occurrence</tt> rule.
</p>


<p>
The <tt class="symbol">occurrence</tt> element may also have
<tt class="symbol">min</tt> and <tt class="symbol">max</tt> attributes. The
<tt class="symbol">internal</tt> attribute may be set to <tt class="symbol">yes</tt>
(meaning that matching occurrences must be internal),
<tt class="symbol">no</tt> (meaning that matching occurrences must be
external), or <tt class="symbol">either</tt>, meaning that they may be either.
</p>


<p>
If the <tt class="symbol">occurrence</tt> element has a
<tt class="symbol">scope</tt> child element the scope of each occurrence is
matched against that specified in the <tt class="symbol">scope</tt> child.
</p>





<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow">
<th class="dbTableHeaderEntry">Name</th><th class="dbTableHeaderEntry">Type</th><th class="dbTableHeaderEntry">Required</th><th class="dbTableHeaderEntry">Default</th><th class="dbTableHeaderEntry">Definition</th>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">internal</td><td class="dbTableEntry">yes, no, either</td><td class="dbTableEntry">#DEFAULT</td><td class="dbTableEntry">either</td><td class="dbTableEntry">Whether the occurrence must be internal or
      external, or whether it can be both.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">max</td><td class="dbTableEntry">CDATA</td><td class="dbTableEntry">#DEFAULT</td><td class="dbTableEntry">Inf</td><td class="dbTableEntry">The maximum number of matches allowed on this
      constraint for each instance of the class.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">min</td><td class="dbTableEntry">CDATA</td><td class="dbTableEntry">#DEFAULT</td><td class="dbTableEntry">0</td><td class="dbTableEntry">The minimum number of matches allowed on this
      constraint for each instance of the class.</td>
</tr>
</table>






<h3>
<a name="N103A6">2.7. The playing element</a>
</h3>






<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow"></tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Summary:</td><td class="dbTableEntry">Defines a constraint on the roles a topic may play
    in associations.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Content model:</td><td class="dbTableEntry">(instanceOf , in?) </td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Parents:</td><td class="dbTableEntry">topic, ruleset</td>
</tr>
</table>




<p>
The <tt class="symbol">playing</tt> element is used to constrain what roles a
topic may play in associations. If an association role has a type
matching that specified in the <tt class="symbol">instanceOf</tt> child it is
validated against the <tt class="symbol">playing</tt> rule.
</p>


<p>
The <tt class="symbol">playing</tt> element may have <tt class="symbol">min</tt> and
<tt class="symbol">max</tt> attributes constraining the cardinality of
matching association roles.
</p>


<p>
The <tt class="symbol">playing</tt> element may have an <tt class="symbol">in</tt>
child, which specifies what types of associations the association
roles may be part of. The <tt class="symbol">in</tt> element may contain any
number of <tt class="symbol">instanceOf</tt> elements. As long as the
containing association matches one of those elements the association
role is accepted.
</p>





<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow">
<th class="dbTableHeaderEntry">Name</th><th class="dbTableHeaderEntry">Type</th><th class="dbTableHeaderEntry">Required</th><th class="dbTableHeaderEntry">Default</th><th class="dbTableHeaderEntry">Definition</th>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">max</td><td class="dbTableEntry">CDATA</td><td class="dbTableEntry">#DEFAULT</td><td class="dbTableEntry">Inf</td><td class="dbTableEntry">The maximum number of matches allowed on this
      constraint for each instance of the class.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">min</td><td class="dbTableEntry">CDATA</td><td class="dbTableEntry">#DEFAULT</td><td class="dbTableEntry">0</td><td class="dbTableEntry">The minimum number of matches allowed on this
      constraint for each instance of the class.</td>
</tr>
</table>






<h3>
<a name="N10436">2.8. The association element</a>
</h3>






<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow"></tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Summary:</td><td class="dbTableEntry">Defines an association class.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Content model:</td><td class="dbTableEntry">(instanceOf , scope? , role+) </td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Parents:</td><td class="dbTableEntry">tm-schema</td>
</tr>
</table>




<p>
The <tt class="symbol">association</tt> element is used to define the
structure of a class of associations. Any association which matches
the <tt class="symbol">instanceOf</tt> child of an
<tt class="symbol">association</tt> element is validated against the rule
specified by that element.
</p>


<p>
The <tt class="symbol">scope</tt> element can be used to define what scopes
are allowed for associations of this class. If the element is not
present, all scopes are allowed. If present, the scope of all
associations must match that specified.
</p>


<p>
The association roles in the association will be validated against the
<tt class="symbol">role</tt> children of the <tt class="symbol">association</tt>
element. Roles that do not match any <tt class="symbol">role</tt> element
will be rejected.
</p>


<p>The <tt class="symbol">association</tt> element has no attributes.</p>





<h3>
<a name="N10484">2.9. The role element</a>
</h3>






<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow"></tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Summary:</td><td class="dbTableEntry">Contains a constraint on the association roles
    in an association.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Content model:</td><td class="dbTableEntry">(instanceOf , player*) </td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Parents:</td><td class="dbTableEntry">association</td>
</tr>
</table>




<p>
The <tt class="symbol">role</tt> element is used to constrain the association
roles that may appear inside an association. The
<tt class="symbol">instanceOf</tt> child is used to specify the type matched
by the <tt class="symbol">role</tt> element, and all association roles that
match the <tt class="symbol">instanceOf</tt> element will be matched against
the <tt class="symbol">role</tt> element.
</p>


<p>
The <tt class="symbol">role</tt> element may have <tt class="symbol">min</tt> and
<tt class="symbol">max</tt> attributes, which specify the number of matches
that are allowed within each association.
</p>


<p>
The <tt class="symbol">player</tt> child element is used to specify what
classes of topics are allowed to play this role in an association.
Topics are matched against the <tt class="symbol">player</tt> element in the
same way they are matched against the <tt class="symbol">instanceOf</tt>
element. (See the section on that element for details.) To specify
that instances of more than one class may play a role, use more than
one <tt class="symbol">player</tt> element.
</p>





<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow">
<th class="dbTableHeaderEntry">Name</th><th class="dbTableHeaderEntry">Type</th><th class="dbTableHeaderEntry">Required</th><th class="dbTableHeaderEntry">Default</th><th class="dbTableHeaderEntry">Definition</th>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">max</td><td class="dbTableEntry">CDATA</td><td class="dbTableEntry">#DEFAULT</td><td class="dbTableEntry">Inf</td><td class="dbTableEntry">The maximum number of matches allowed on this
      constraint for each instance of the class.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">min</td><td class="dbTableEntry">CDATA</td><td class="dbTableEntry">#DEFAULT</td><td class="dbTableEntry">0</td><td class="dbTableEntry">The minimum number of matches allowed on this
      constraint for each instance of the class.</td>
</tr>
</table>







<h2>
<a name="N1051B">3. Low-level elements</a>
</h2>



<p>
This section defines the semantics of the low-level elements of the
Ontopia Schema Language.
</p>


<h3>
<a name="N10523">3.1. The ruleref element</a>
</h3>






<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow"></tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Summary:</td><td class="dbTableEntry">A reference to a ruleset that is to be included
    in a topic class.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Content model:</td><td class="dbTableEntry">EMPTY</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Parents:</td><td class="dbTableEntry">topic, ruleset</td>
</tr>
</table>




<p>
The <tt class="symbol">ruleref</tt> element is used to refer to
<tt class="symbol">ruleset</tt> elements in the same schema. The element has
a <tt class="symbol">rule</tt> attribute, which contains the ID of the
<tt class="symbol">ruleset</tt> element being referenced. All the constraints
contained in that <tt class="symbol">ruleset</tt> element are then included
in the set of constraints defined by the <tt class="symbol">ruleset</tt> or
<tt class="symbol">topic</tt> element that contains the
<tt class="symbol">ruleref</tt> element.
</p>


<p>
It is an error for the <tt class="symbol">ruleref</tt> element to refer to an
ID that does not exist in the schema.
</p>





<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow">
<th class="dbTableHeaderEntry">Name</th><th class="dbTableHeaderEntry">Type</th><th class="dbTableHeaderEntry">Required</th><th class="dbTableHeaderEntry">Default</th><th class="dbTableHeaderEntry">Definition</th>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">rule</td><td class="dbTableEntry">IDREF</td><td class="dbTableEntry">#REQUIRED</td><td class="dbTableEntry">&nbsp;</td><td class="dbTableEntry">The ID of the ruleset being referred
      to.</td>
</tr>
</table>





<h3>
<a name="N1059D">3.2. The superclass element</a>
</h3>






<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow"></tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Summary:</td><td class="dbTableEntry">Refers to the superclass of the topic class being
    defined.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Content model:</td><td class="dbTableEntry">EMPTY</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Parents:</td><td class="dbTableEntry">topic</td>
</tr>
</table>




<p>
The <tt class="symbol">superclass</tt> element is used to declare that a
class must be a subclass of another. The validator will use this
information to check that the topic representing the class actually is
a subclass of the referred-to superclass. The superclass is identified
by referring to the topic class definition that corresponds to the
superclass topic.
</p>





<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow">
<th class="dbTableHeaderEntry">Name</th><th class="dbTableHeaderEntry">Type</th><th class="dbTableHeaderEntry">Required</th><th class="dbTableHeaderEntry">Default</th><th class="dbTableHeaderEntry">Definition</th>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">ref</td><td class="dbTableEntry">IDREF</td><td class="dbTableEntry">#REQUIRED</td><td class="dbTableEntry">&nbsp;</td><td class="dbTableEntry">The ID of the superclass topic class
      definition.</td>
</tr>
</table>





<h3>
<a name="N105FC">3.3. The player element</a>
</h3>






<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow"></tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Summary:</td><td class="dbTableEntry">Controls the allowed types of the topic that may play
    a particular role in an association.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Content model:</td><td class="dbTableEntry">(topicRef | subjectIndicatorRef | internalTopicRef | any)? </td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Parents:</td><td class="dbTableEntry">role</td>
</tr>
</table>




<p>
Used inside <tt class="symbol">role</tt> elements to specify the allowed
classes of topics that may play a given role in an association.  Its
semantics are otherwise the same as those for
<tt class="symbol">instanceOf</tt>. 
</p>





<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow">
<th class="dbTableHeaderEntry">Name</th><th class="dbTableHeaderEntry">Type</th><th class="dbTableHeaderEntry">Required</th><th class="dbTableHeaderEntry">Default</th><th class="dbTableHeaderEntry">Definition</th>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">subclasses</td><td class="dbTableEntry">yes, no</td><td class="dbTableEntry">#DEFAULT</td><td class="dbTableEntry">yes</td><td class="dbTableEntry">Whether subclasses of the specified types are
      accepted or not.</td>
</tr>
</table>






<h3>
<a name="N1065E">3.4. The instanceOf element</a>
</h3>






<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow"></tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Summary:</td><td class="dbTableEntry">Specifies the type of a topic map
    object.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Content model:</td><td class="dbTableEntry">(topicRef | subjectIndicatorRef | internalTopicRef | any)? </td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Parents:</td><td class="dbTableEntry">topic, role, occurrence, in, scope, playing, association</td>
</tr>
</table>




<p>
The <tt class="symbol">instanceOf</tt> element is used to match topic map
objects by their type. The contents of the element specify what topic
is allowed as the type of the objects to be matched. If the element is
empty it means that the object must have no type in order to match.
</p>


<p>
The <tt class="symbol">subclasses</tt> attribute is used to control whether
instances of subclasses should match or not. If it is set to
<tt class="symbol">yes</tt> they do match, and if set to <tt class="symbol">no</tt>
they do not. The default is that subclasses do match.
</p>


<p>
The <tt class="symbol">topicRef</tt>, <tt class="symbol">subjectIndicatorRef</tt>,
<tt class="symbol">internalTopicRef</tt>, and <tt class="symbol">any</tt> child
elements are used to specify the type of the topic map object.
</p>





<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow">
<th class="dbTableHeaderEntry">Name</th><th class="dbTableHeaderEntry">Type</th><th class="dbTableHeaderEntry">Required</th><th class="dbTableHeaderEntry">Default</th><th class="dbTableHeaderEntry">Definition</th>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">subclasses</td><td class="dbTableEntry">yes, no</td><td class="dbTableEntry">#DEFAULT</td><td class="dbTableEntry">yes</td><td class="dbTableEntry">Whether instances of subclasses are
      accepted.</td>
</tr>
</table>






<h3>
<a name="N106D8">3.5. The scope element</a>
</h3>






<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow"></tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Summary:</td><td class="dbTableEntry">Controls the allowed scope of a topic characteristic.
    </td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Content model:</td><td class="dbTableEntry">(topicRef | subjectIndicatorRef | internalTopicRef | any | instanceOf)* </td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Parents:</td><td class="dbTableEntry">baseName, variant, occurrence, association</td>
</tr>
</table>




<p>
The <tt class="symbol">scope</tt> element is used to constrain (or match) the
scopes of topic map objects. The contents of the element specify what
topics are allowed as themes in the scope. If the element is empty it
means that the object must be in the unconstrained scope to match.
</p>


<p>
The <tt class="symbol">match</tt> attribute is used to specify how the scope
of the topic map object is matched against that specified in this
element. If set to <tt class="symbol">exact</tt> every topic mentioned in the
<tt class="symbol">scope</tt> element must be present, and no topics that are
not specified are allowed. If set to <tt class="symbol">superset</tt> some or
all of the topics specified may be left out, but no extra topics are
allowed. If set to <tt class="symbol">subset</tt> no topics may be left out,
but the ones specified must at least be present.
</p>


<p>
The <tt class="symbol">topicRef</tt>, <tt class="symbol">subjectIndicatorRef</tt>,
<tt class="symbol">internalTopicRef</tt>, and <tt class="symbol">any</tt> child
elements are used to specify the themes that may appear in the scope.
The <tt class="symbol">instanceOf</tt> element is also allowed as a child of
the <tt class="symbol">scope</tt> element, and if present it states that all
topics that match the <tt class="symbol">instanceOf</tt> element are allowed
as themes in the scope.
</p>





<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow">
<th class="dbTableHeaderEntry">Name</th><th class="dbTableHeaderEntry">Type</th><th class="dbTableHeaderEntry">Required</th><th class="dbTableHeaderEntry">Default</th><th class="dbTableHeaderEntry">Definition</th>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">match</td><td class="dbTableEntry">subset, superset, exact</td><td class="dbTableEntry">#DEFAULT</td><td class="dbTableEntry">exact</td><td class="dbTableEntry">Controls how the specified scope is matched
      against the scope of actual topic characteristics.</td>
</tr>
</table>





<h3>
<a name="N10761">3.6. The topicRef element</a>
</h3>






<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow"></tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Summary:</td><td class="dbTableEntry">Identifies a topic by its source
    locator.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Content model:</td><td class="dbTableEntry">EMPTY</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Parents:</td><td class="dbTableEntry">instanceOf, player, otherClass, scope</td>
</tr>
</table>




<p>
The <tt class="symbol">topicRef</tt> element is used to match topics by their
source locators. The <tt class="symbol">href</tt> attribute contains a URI
(resolved relative to that of the current entity), and topics which
have that URI as their source locator will match, while no other
topics will.
</p>





<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow">
<th class="dbTableHeaderEntry">Name</th><th class="dbTableHeaderEntry">Type</th><th class="dbTableHeaderEntry">Required</th><th class="dbTableHeaderEntry">Default</th><th class="dbTableHeaderEntry">Definition</th>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">href</td><td class="dbTableEntry">CDATA</td><td class="dbTableEntry">#REQUIRED</td><td class="dbTableEntry">&nbsp;</td><td class="dbTableEntry">The URI that is the source locator of the
      topic.</td>
</tr>
</table>





<h3>
<a name="N107C3">3.7. The subjectIndicatorRef element</a>
</h3>






<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow"></tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Summary:</td><td class="dbTableEntry">Identifies a topic by its subject
    identifier.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Content model:</td><td class="dbTableEntry">EMPTY</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Parents:</td><td class="dbTableEntry">instanceOf, player, otherClass, scope</td>
</tr>
</table>




<p>
The <tt class="symbol">subjectIndicatorRef</tt> element is used to match
topics by their subject identifiers. The <tt class="symbol">href</tt>
attribute contains a URI (resolved relative to that of the current
entity), and topics which have that URI as their subject identifier
will match, while no other topics will.
</p>





<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow">
<th class="dbTableHeaderEntry">Name</th><th class="dbTableHeaderEntry">Type</th><th class="dbTableHeaderEntry">Required</th><th class="dbTableHeaderEntry">Default</th><th class="dbTableHeaderEntry">Definition</th>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">href</td><td class="dbTableEntry">CDATA</td><td class="dbTableEntry">#REQUIRED</td><td class="dbTableEntry">&nbsp;</td><td class="dbTableEntry">The URI that is the subject
      identifier.</td>
</tr>
</table>





<h3>
<a name="N10825">3.8. The internalTopicRef element</a>
</h3>






<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow"></tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Summary:</td><td class="dbTableEntry">Identifies a topic by its source
    locator.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Content model:</td><td class="dbTableEntry">EMPTY</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Parents:</td><td class="dbTableEntry">instanceOf, player, otherClass, scope</td>
</tr>
</table>




<p>
The <tt class="symbol">internalTopicRef</tt> element is used to match topics
by their source locators. The <tt class="symbol">href</tt> attribute contains
a URI (resolved relative to the base address of the topic map), and
topics which have that URI as their source locator will match, while
no other topics will.
</p>





<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow">
<th class="dbTableHeaderEntry">Name</th><th class="dbTableHeaderEntry">Type</th><th class="dbTableHeaderEntry">Required</th><th class="dbTableHeaderEntry">Default</th><th class="dbTableHeaderEntry">Definition</th>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">href</td><td class="dbTableEntry">CDATA</td><td class="dbTableEntry">#REQUIRED</td><td class="dbTableEntry">&nbsp;</td><td class="dbTableEntry">The URI that is the source locator of the
      topic.</td>
</tr>
</table>





<h3>
<a name="N10887">3.9. The any element</a>
</h3>






<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow"></tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Summary:</td><td class="dbTableEntry">Any topic.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Content model:</td><td class="dbTableEntry">EMPTY</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Parents:</td><td class="dbTableEntry">instanceOf, player, otherClass, scope</td>
</tr>
</table>




<p>
The <tt class="symbol">any</tt> element matches any topic and is used as a
wildcard in matching.
</p>


<p>The <tt class="symbol">any</tt> element has no attributes.</p>




<h3>
<a name="N108BD">3.10. The player element</a>
</h3>






<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow"></tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Summary:</td><td class="dbTableEntry">Controls the allowed types of the topic that may play
    a particular role in an association.</td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Content model:</td><td class="dbTableEntry">(topicRef | subjectIndicatorRef | internalTopicRef | any)? </td>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">Parents:</td><td class="dbTableEntry">role</td>
</tr>
</table>




<p>
Used inside <tt class="symbol">role</tt> elements to specify the allowed
classes of topics that may play a given role in an association.  Its
semantics are otherwise the same as those for
<tt class="symbol">instanceOf</tt>. 
</p>





<table width="" cellpadding="4" cellspacing="0" border="1" class="dbTable">
<tr class="dbTableHeaderRow">
<th class="dbTableHeaderEntry">Name</th><th class="dbTableHeaderEntry">Type</th><th class="dbTableHeaderEntry">Required</th><th class="dbTableHeaderEntry">Default</th><th class="dbTableHeaderEntry">Definition</th>
</tr>
<tr class="dbTableRow">
<td class="dbTableEntry">subclasses</td><td class="dbTableEntry">yes, no</td><td class="dbTableEntry">#DEFAULT</td><td class="dbTableEntry">yes</td><td class="dbTableEntry">Whether subclasses of the specified types are
      accepted or not.</td>
</tr>
</table>





</body>
</html>
